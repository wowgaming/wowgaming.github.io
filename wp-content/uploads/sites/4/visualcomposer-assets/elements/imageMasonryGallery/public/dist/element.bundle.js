(window.vcvWebpackJsonp4x=window.vcvWebpackJsonp4x||[]).push([[0],{"./imageMasonryGallery/index.js":function(e,a,n){"use strict";n.r(a);var l=n("./node_modules/vc-cake/index.js"),i=n.n(l),t=n("./node_modules/@babel/runtime/helpers/extends.js"),s=n.n(t),o=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),r=n.n(o),m=n("./node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(m),g=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),p=n.n(g),u=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(u),y=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),h=n.n(y),v=n("./node_modules/@babel/runtime/helpers/inherits.js"),b=n.n(v),x=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),f=n.n(x),w=n("./node_modules/react/index.js"),I=n.n(w),k=function(e){function a(e){var n;return r()(this,a),n=p()(this,d()(a).call(this,e)),f()(h()(n),"currentImg",0),f()(h()(n),"loadingIndex",0),f()(h()(n),"data",[]),n.loadImage=n.loadImage.bind(h()(n)),n}return b()(a,e),c()(a,[{key:"componentDidMount",value:function(){this.prepareImages(this.props.atts)}},{key:"componentDidUpdate",value:function(){i.a.env("iframe")&&i.a.env("iframe").vcv.trigger("ready")}},{key:"componentWillReceiveProps",value:function(e){this.currentImg=0,this.data=[],this.loadingIndex++,this.prepareImages(e.atts,!0)}},{key:"prepareImages",value:function(e){for(var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.image,l=this.getImageUrl(n),i=e.columns<=0?1:e.columns,t=[],s=0;s<i;s++)t.push(0),this.data.push([]);if(a){t=[];for(var o=0;o<i;o++)t.push(0)}this.loadImage(l,t)}},{key:"loadImage",value:function(e,a){if(e.length){var n=new window.Image;n.loadingIndex=this.loadingIndex,n.onload=this.imgLoadHandler.bind(this,e,a,n),n.src=e[this.currentImg]}else this.setState({columnData:this.data})}},{key:"imgLoadHandler",value:function(e,a,n){if(n.loadingIndex===this.loadingIndex){var l=this.getImageHeight(n.width,n.height),i=this.getSmallestFromArray(a);a[i]+=l,this.data[i].push(this.props.atts.image[this.currentImg]),this.currentImg++,this.currentImg<e.length?this.loadImage(e,a):this.setState({columnData:this.data})}}},{key:"getImageHeight",value:function(e,a){return a/(e/50)}},{key:"getSmallestFromArray",value:function(e){var a=0,n=e[0];return e.forEach(function(l,i){l<n&&(n=e[i],a=i)}),a}},{key:"render",value:function(){var e=this,a=this.props,n=a.id,l=a.atts,i=a.editor,t=l.image,o=l.shape,r=l.customClass,m=l.metaCustomId,c=l.clickableOptions,g=l.showCaption,p=["vce-image-masonry-gallery"],u=["vce-image-masonry-gallery-wrapper vce"],d={},y="div",h=this.state&&this.state.columnData,v=[];if(h){var b=0;h.forEach(function(a,l){var i=[];a&&a.forEach(function(a,l){var o=e.getImageUrl(a),r={},m="vce-image-masonry-gallery-item",p={alt:a&&a.alt?a.alt:""};if("url"===c&&a.link&&a.link.url){y="a";var u=a.link;r={href:u.url,title:u.title,target:u.targetBlank?"_blank":void 0,rel:u.relNofollow?"nofollow":void 0}}else"imageNewTab"===c?(y="a",r={href:o,target:"_blank"}):"lightbox"===c?(y="a",r={href:o,"data-lightbox":"lightbox-".concat(n)}):"photoswipe"===c&&(y="a",r={href:o,"data-photoswipe-image":n,"data-photoswipe-index":b,"data-photoswipe-item":"photoswipe-".concat(n)},g&&a&&a.caption&&(r["data-photoswipe-caption"]=a.caption),d["data-photoswipe-gallery"]=n,b++);t[l]&&t[l].filter&&"normal"!==t[l].filter&&(m+=" vce-image-filter--".concat(t[l].filter)),i.push(I.a.createElement(y,s()({},r,{className:m,key:"vce-image-masonry-gallery-item-".concat(l,"-").concat(n)}),I.a.createElement("img",s()({className:"vce-image-masonry-gallery-img",src:e.getImageUrl(a)},p))))}),v.push(I.a.createElement("div",{className:"vce-image-masonry-gallery-column",key:"vce-image-masonry-gallery-col-".concat(l,"-").concat(n)},i))})}"string"==typeof r&&r&&p.push(r);var x=this.getMixinData("imageGalleryGap");x&&u.push("vce-image-masonry-gallery--gap-".concat(x.selector)),(x=this.getMixinData("imageGalleryColumns"))&&u.push("vce-image-masonry-gallery--columns-".concat(x.selector)),"rounded"===o&&p.push("vce-image-masonry-gallery--border-rounded"),m&&(d.id=m);var f=this.applyDO("all");return I.a.createElement("div",s()({className:p.join(" ")},i,d),I.a.createElement("div",s()({className:u.join(" "),id:"el-"+n},f),I.a.createElement("div",{className:"vce-image-masonry-gallery-list"},v)))}}]),a}(i.a.getService("api").elementComponent);(0,i.a.getService("cook").add)(n("./imageMasonryGallery/settings.json"),function(e){e.add(k)},{css:n("./node_modules/raw-loader/index.js!./imageMasonryGallery/styles.css"),editorCss:n("./node_modules/raw-loader/index.js!./imageMasonryGallery/editor.css"),mixins:{imageGalleryColumns:{mixin:n("./node_modules/raw-loader/index.js!./imageMasonryGallery/cssMixins/imageGalleryColumns.pcss")},imageGalleryGap:{mixin:n("./node_modules/raw-loader/index.js!./imageMasonryGallery/cssMixins/imageGalleryGap.pcss")}}},"")},"./imageMasonryGallery/settings.json":function(e){e.exports={image:{type:"attachimage",access:"public",value:["image-1.jpg","image-2.jpg","image-3.jpg","image-4.jpg","image-5.jpg","image-6.jpg"],options:{label:"Images",multiple:!0,onChange:{rules:{clickableOptions:{rule:"value",options:{value:"url"}}},actions:[{action:"attachImageUrls"}]},url:!1,imageFilter:!0}},shape:{type:"buttonGroup",access:"public",value:"square",options:{label:"Shape",values:[{label:"Square",value:"square",icon:"vcv-ui-icon-attribute-shape-square"},{label:"Rounded",value:"rounded",icon:"vcv-ui-icon-attribute-shape-rounded"}]}},designOptions:{type:"designOptions",access:"public",value:{},options:{label:"Design Options"}},editFormTab1:{type:"group",access:"protected",value:["clickableOptions","showCaption","image","columns","gap","shape","metaCustomId","customClass"],options:{label:"General"}},metaEditFormTabs:{type:"group",access:"protected",value:["editFormTab1","designOptions"]},relatedTo:{type:"group",access:"protected",value:["General"]},customClass:{type:"string",access:"public",value:"",options:{label:"Extra class name",description:"Add an extra class name to the element and refer to it from Custom CSS option."}},clickableOptions:{type:"dropdown",access:"public",value:"lightbox",options:{label:"OnClick action",values:[{label:"None",value:""},{label:"Lightbox",value:"lightbox"},{label:"PhotoSwipe",value:"photoswipe"},{label:"Open Image in New Tab",value:"imageNewTab"},{label:"Link selector",value:"url"}]}},showCaption:{type:"toggle",access:"public",value:!1,options:{label:"Show image caption in gallery view",onChange:{rules:{clickableOptions:{rule:"value",options:{value:"photoswipe"}}},actions:[{action:"toggleVisibility"}]}}},gap:{type:"number",access:"public",value:"10",options:{label:"Gap",description:"Enter gap in pixels (Example: 5).",cssMixin:{mixin:"imageGalleryGap",property:"gap",namePattern:"[\\da-f]+"}}},columns:{type:"number",access:"public",value:"3",options:{label:"Number of Columns",cssMixin:{mixin:"imageGalleryColumns",property:"columns",namePattern:"[\\da-f]+"}}},metaCustomId:{type:"customId",access:"public",value:"",options:{label:"Element ID",description:"Apply unique ID to element to link directly to it by using #your_id (for element ID use lowercase input only)."}},tag:{access:"protected",type:"string",value:"imageMasonryGallery"},sharedAssetsLibrary:{access:"protected",type:"string",value:{libraries:[{rules:{clickableOptions:{rule:"value",options:{value:"lightbox"}}},libsNames:["lightbox"]},{rules:{clickableOptions:{rule:"value",options:{value:"photoswipe"}}},libsNames:["photoswipe"]}]}}}},"./node_modules/raw-loader/index.js!./imageMasonryGallery/cssMixins/imageGalleryColumns.pcss":function(e,a){e.exports="@media (min-width: 544px) {\n  .vce-image-masonry-gallery {\n    &--columns-$selector {\n      .vce-image-masonry-gallery-column {\n        @if $columns != false {\n          flex: 0 0 calc(100% / $columns);\n          max-width: calc(100% / $columns);\n        }\n      }\n    }\n  }\n}\n\n\n"},"./node_modules/raw-loader/index.js!./imageMasonryGallery/cssMixins/imageGalleryGap.pcss":function(e,a){e.exports=".vce-image-masonry-gallery {\n  &--gap-$selector {\n    @if $gap != false {\n      .vce-image-masonry-gallery-list {\n        margin-left: calc(-$(gap)px / 2);\n        margin-right: calc(-$(gap)px / 2);\n        margin-bottom: -$(gap)px;\n      }\n    }\n\n    @if $gap != false {\n      .vce-image-masonry-gallery-item {\n        padding-left: calc($(gap)px / 2);\n        padding-right: calc($(gap)px / 2);\n        margin-bottom: $(gap)px;\n      }\n    }\n  }\n}\n\n"},"./node_modules/raw-loader/index.js!./imageMasonryGallery/editor.css":function(e,a){e.exports=".vce-image-masonry-gallery {\n  min-height: 1em;\n}\n"},"./node_modules/raw-loader/index.js!./imageMasonryGallery/styles.css":function(e,a){e.exports=".vce-image-masonry-gallery-wrapper {\n  overflow: hidden;\n}\n\n.vce-image-masonry-gallery-list {\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n\n.vce-image-masonry-gallery-column {\n  flex: 0 0 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n}\n\n.vce-image-masonry-gallery-item {\n  display: block;\n}\n\na.vce-image-masonry-gallery-item {\n  color: transparent;\n  border-bottom: 0;\n  text-decoration: none;\n  box-shadow: none;\n}\n\na.vce-image-masonry-gallery-item:hover,\na.vce-image-masonry-gallery-item:focus {\n  border-bottom: 0;\n  text-decoration: none;\n  box-shadow: none;\n}\n\n.vce-image-masonry-gallery-img {\n  width: 100%;\n  height: auto;\n}\n\n.vce-image-masonry-gallery--border-rounded .vce-image-masonry-gallery-img {\n  border-radius: 5px;\n}\n\n.vce-image-masonry-gallery .vce-image-masonry-gallery-item .vce-image-masonry-gallery-img {\n  box-shadow: none;\n}\n"}},[["./imageMasonryGallery/index.js"]]]);